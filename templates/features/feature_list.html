{% extends 'base.html' %} {% block content %}


<div class="container">
    <div class="row">
        <div class="col-xs-10">
            <h2>Feature List</h2>
        </div>
        <div class="col-xs-2">
            {% if request.user.is_authenticated %} 
            <a href="{% url 'feature_create' %}"><i class="fas fa-plus-circle"></i> New Feature</a>
            {% endif %}
        </div>

    </div>
    <p>Click <a href="{% url 'feature_contributions' %}">here</a> to see the charts displaying each features's contributions against its price.</p>
    <br>
</div>

{% for feature in features %}
<div class="container">

    <div class="row">
        <div class="col-md-12">
            <div class="panel">
                <div class="panel-body">
                    <div class="col-md-10 col-sm-9">


                        <a href="{% url 'feature_detail' feature.id feature.slug %}">
                            <h3>{{ feature.title }}</h3>
                        </a>



                        <div class="row">
                            <div class="col-xs-12">
                                <p>{{ feature.content|truncatewords:30 }}</p>

                                <a href="{% url 'user_profile' feature.author.id %}">
                                    <p>By {{ feature.author.username }}</p>
                                </a>


                                <p><span class="boldtext">Published on:</span> {{ feature.published_date }} </p>
                                <hr> {% if feature.price != None and feature.total_contributions != None %}
                                <div class="col-md-3 col-sm-2">
                                    <span>Price: £</span>{{ feature.price }}
                                </div>
                                <div class="col-md-3 col-sm-2">
                                    <span>Contributions: £</span>{{ feature.total_contributions }}
                                </div>
                                {% else %}
                                <div class="col-md-3 col-sm-2">
                                    <span>Price: </span>TBA
                                </div>
                                <div class="col-md-3 col-sm-2">
                                    <span>Contributions: £0</span>
                                </div>
                                {% endif %}
                                <div class="col-md-3 col-sm-2">
                                    <span class="boldtext">Comments:</span> {{ feature.comments }}
                                </div>
                                <div class="col-md-3 col-sm-2">
                                    <span class="boldtext">Status:</span> {{ feature.get_status_display }}
                                </div>


                            </div>
                        </div>
                    </div>
                    <hr>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
{% endfor %} {% endblock %}
